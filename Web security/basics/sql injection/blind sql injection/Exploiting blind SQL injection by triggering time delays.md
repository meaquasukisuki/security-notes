# Exploiting blind SQL injection by triggering time delays

If return data or not doesn't affect response result, database error got handled (caught) very well have error doesn't affect response results.

If we know **sql query works sync (After querying, then response result returns)**,  we can use time delay methods.

<br>

lab : 
This lab contains a [blind SQL injection](https://portswigger.net/web-security/sql-injection/blind) vulnerability. The application uses a tracking cookie for analytics, and performs an SQL query containing the value of the submitted cookie.

The results of the SQL query are not returned, and the application does not respond any differently based on whether the query returns any rows or causes an error. However, since the query is executed synchronously, it is possible to trigger conditional time delays to infer information.

To solve the lab, exploit the [SQL injection](https://portswigger.net/web-security/sql-injection) vulnerability to cause a 10 second delay.

<br>
Solving process :

use sql injection cheat sheet time delay part to find out what database type and trigger a 10s delay.
![[Pasted image 20211021013949.png]]



```sql
select * from xxx where trackingId = '
userInput' || pg_sleep(10)) --
'
```

```sql

userInput' || pg_sleep(10)) === concat('userInput',pg_sleep(10))

```
<br>


lab  Blind SQL injection with time delays and information retrieval

This lab contains a [blind SQL injection](https://portswigger.net/web-security/sql-injection/blind) vulnerability. The application uses a tracking cookie for analytics, and performs an SQL query containing the value of the submitted cookie.

The results of the SQL query are not returned, and the application does not respond any differently based on whether the query returns any rows or causes an error. However, since the query is executed synchronously, it is possible to trigger conditional time delays to infer information.

The database contains a different table called `users`, with columns called `username` and `password`. You need to exploit the blind [SQL injection](https://portswigger.net/web-security/sql-injection) vulnerability to find out the password of the `administrator` user.

To solve the lab, log in as the `administrator` user.

Solving process :

add `' || (select case when length(password) = ยง1ยง then pg_sleep(1) else ' ' end from users where username = 'administrator') --`, find  user `administrator` password's length.

![[Pasted image 20211021022134.png]]
![[Pasted image 20211021022052.png]]
password length is 20.

**We need to set intruder thread to 1 to get clear result.**
<br>

**How to add response time column?**
![[Pasted image 20211021022445.png]]

<br>

find out password : Use intruder cluster bomb and set payload type and range correctly.
![[Pasted image 20211021025108.png]]



